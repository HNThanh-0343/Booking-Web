@model WEBSITE_TRAVELBOOKING.Models.SysBooking
@using WEBSITE_TRAVELBOOKING.Helper
@{
	Layout = "_layout";
	ViewData["Title"] = "Thanh toán";
	ViewData["Detail"] = true;

}
<style>
	.indam{
		font-weight:bold;
	}
</style>
<main id="content" class="bg-gray space-2">
	<div class="container">
		<div class="row">
			<div class="col-lg-7 col-xl-8">
				<div class="mb-5 shadow-soft bg-white rounded-sm">
					<div class="py-3 px-4 px-xl-12 border-bottom">
						<ul class="list-group flex-nowrap overflow-auto overflow-md-visble list-group-horizontal list-group-borderless flex-center-between pt-1">
							<li class="list-group-item text-center flex-shrink-0 flex-xl-shrink-1">
								<div class="flex-content-center mb-3 width-40 height-40 border border-width-2 border-gray mx-auto rounded-circle">
									1
								</div>
								<div class="text-gray-1">Thông tin khách hàng</div>
							</li>
							<li class="list-group-item text-center flex-shrink-0 flex-xl-shrink-1">
								<div class="flex-content-center mb-3 width-40 height-40 bg-primary border-width-2 border border-primary text-white mx-auto rounded-circle">
									2
								</div>
								<div class="text-primary">Thông tin thanh toán</div>
							</li>
							<li class="list-group-item text-center flex-shrink-0 flex-md-shrink-1">
								<div class="flex-content-center mb-3 width-40 height-40 border border-width-2 border-gray mx-auto rounded-circle">
									3
								</div>
								<div class="text-gray-1">Đã xác nhận đặt chỗ!</div>
							</li>
						</ul>
					</div>
					<div class="pt-5 pb-5 px-5 bg-white shadow-sm rounded-lg">
						<h4 class="text-dark mb-4 indam" style="font-size: 1.75rem;">
							<i class="fas fa-user mr-2 text-primary"></i>
							Chào bạn, vui lòng xác nhận lại thông tin:
						</h4>

						<div class="row mb-3" style="font-size: 1.25rem;">
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Họ tên:</span> @Model.FullNameGuest
							</div>
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Ngày nhận:</span> @Model.StartDate.ToString("dd/MM/yyyy HH:mm")
							</div>
						</div>

						<div class="row mb-3" style="font-size: 1.25rem;">
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Số điện thoại:</span> @Model.PhoneGuest
							</div>
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Ngày trả:</span> @Model.EndDate.ToString("dd/MM/yyyy HH:mm")
							</div>
							
						</div>

						<div class="row mb-3" style="font-size: 1.25rem;">
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Email:</span> @Model.EmailGuest
							</div>
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Tổng tiền:</span>
								<span class="text-danger font-weight-bold">@Model.Price VNĐ</span>
							</div>
							
						</div>

						<div class="row mb-3" style="font-size: 1.25rem;">
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Phòng:</span> @ViewBag.Roomsname
							</div>
							
							
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Giá giảm khuyến mãi:</span>
								<span class="text-warning font-weight-bold">@Model.DiscountAmount VNĐ</span>
							</div>
						</div>

						<div class="row mb-3" style="font-size: 1.25rem;">
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Số người:</span> @Model.GuestsNumber
							</div>
							<div class="col-md-6 mb-2">
								<span class="text-dark indam">Thành tiền:</span>
								<span class="text-success font-weight-bold">@Model.DiscountedPrice VNĐ</span>
							</div>
						</div>

						<div class="text-right mt-4">
							<a asp-action="Datphong"
							   asp-controller="KhachSan"
							   asp-area=""
							   asp-route-idp="@Model.BookingItemId"
							   asp-route-nameroom="@Common.GenerateSlug(ViewBag.Roomsname)"
							   asp-route-ci="@Model.StartDate.ToString("yyyyMMddHHmm")"
							   asp-route-co="@Model.EndDate.ToString("yyyyMMddHHmm")"
							   asp-route-gue="@Model.GuestsNumber"
							   class="btn btn-outline-primary px-4 py-2 rounded indam">
								<i class="fas fa-arrow-left mr-1"></i> Quay lại
							</a>
						</div>
					</div>

				</div>
			</div>
			<div class="col-lg-5 col-xl-4 mb-4">
				<div class="shadow-sm bg-white rounded p-4">
					<h5 class="text-dark indam mb-3">
						<i class="fas fa-qrcode mr-2"></i> Thanh toán qua mã QR
					</h5>
					<div class="text-center" id="urlQRCode">
						<!-- QR sẽ được thêm vào đây bằng JS -->
					</div>
				</div>
			</div>
	</div>
</main>
<script>
	 var qrc = JSON.parse('@Html.Raw(ViewBag.ConnentQRCode)');

	function getIMGQRCode() {
		var totalBill = qrc.amount || 0;
		var urlIMGQRCode = `https://qr.sepay.vn/img?acc=${qrc.acc}&bank=${qrc.bank}&amount=${totalBill}&des=${qrc.des}`;
		$('#urlQRCode').html(`<img src='${urlIMGQRCode}' alt='QR Code' class='img-fluid rounded shadow-sm' style='max-width: 100%; height: auto;' />`);
	}
	$(document).ready(function () {
		getIMGQRCode();
	});
</script>